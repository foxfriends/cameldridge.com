- name: Setup
  hosts: cameldridge
  tasks:
    - name: Pull repo
      ansible.builtin.git:
        repo: https://github.com/foxfriends/cameldridge.com.git
        dest: .
        clone: false
    - name: Terraform apply
      community.general.terraform:
        project_path: "./cameldridge.com"
        provider_upgrade: true
        variables:
          digitalocean_token: "{{ digitalocean_token }}"
          gacha_discord_application_id: "{{ gacha_discord_application_id }}"
          gacha_discord_token: "{{ gacha_discord_token }}"
          gacha_sheets_sheet_id: "{{ gacha_sheets_sheet_id }}"
          gacha_sheets_client_id: "{{ gacha_sheets_client_id }}"
          gacha_sheets_redirect_uri: "{{ gacha_sheets_redirect_uri }}"
          gacha_sheets_client_secret: "{{ gacha_sheets_client_secret }}"
          gacha_sheets_refresh_token: "{{ gacha_sheets_refresh_token }}"
          gacha_shopify_shop: "{{ gacha_shopify_shop }}"
          gacha_shopify_token: "{{ gacha_shopify_token }}"
          acme_server_url: "https://acme-v02.api.letsencrypt.org/directory"
